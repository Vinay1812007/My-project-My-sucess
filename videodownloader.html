<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Downloader</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<link rel="stylesheet" href="/style.css">
</head>
<body>

<div class="header">Downloader</div>

<div class="safe-bottom" style="padding:16px">
  <input id="url" placeholder="Paste public media URL…" />
  <button class="button" onclick="analyze()">Analyze</button>

  <div id="info" style="margin-top:16px"></div>
</div>

<div class="tab-bar">
  <div class="tab-item" onclick="go('index.html')">Home</div>
  <div class="tab-item" onclick="go('chatgram.html')">Chat</div>
  <div class="tab-item" onclick="go('music.html')">Music</div>
  <div class="tab-item" onclick="go('ai.html')">AI</div>
</div>

<script>
async function analyze() {
  const u = url.value.trim();
  if (!u) return;

  info.innerHTML = "<div class='glass' style='padding:12px'>Fetching metadata…</div>";

  const meta = await fetch(
    "https://api.allorigins.win/raw?url=" +
    encodeURIComponent("https://noembed.com/embed?url=" + u)
  ).then(r => r.json());

  info.innerHTML = `
    <div class="glass" style="padding:16px">
      <img src="${meta.thumbnail_url || ""}" style="width:100%;border-radius:14px">
      <h3>${meta.title || "Unknown title"}</h3>
      <p>${meta.author_name || ""}</p>
      <a class="button" href="${u}" target="_blank">
        Open Original Source
      </a>
    </div>
  `;
}
</script>

<script src="/script.js"></script>
</body>
</html>
