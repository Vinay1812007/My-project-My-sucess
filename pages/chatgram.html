<button onclick="call()">ðŸ“ž Call</button>

<script>
let pc;

function call() {
  pc = new RTCPeerConnection({ iceServers:[{urls:"stun:stun.l.google.com:19302"}]});
  pc.onicecandidate = e => e.candidate && ws.send(JSON.stringify({type:"ice", data:e.candidate}));

  navigator.mediaDevices.getUserMedia({video:true,audio:true}).then(stream=>{
    stream.getTracks().forEach(t=>pc.addTrack(t,stream));
  });

  pc.createOffer().then(o=>{
    pc.setLocalDescription(o);
    ws.send(JSON.stringify({type:"call", offer:o}));
  });
}
</script>
