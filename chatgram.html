<script>
  const room = "global";

  const ws = new WebSocket(
    "wss://vinaybava.workers.dev/ws?room=" + room
  );

  const box = document.getElementById("messages");
  const input = document.getElementById("msg");

  ws.onopen = () => {
    console.log("âœ… Connected to Chatgram backend");
  };

  ws.onmessage = (e) => {
    const div = document.createElement("div");
    div.textContent = e.data;
    box.appendChild(div);
    box.scrollTop = box.scrollHeight;
  };

  ws.onerror = (err) => {
    console.error("âŒ WebSocket error", err);
  };

  input.addEventListener("keydown", (e) => {
    if (e.key === "Enter" && input.value.trim()) {
      ws.send(input.value);
      input.value = "";
    }
  });
</script>
